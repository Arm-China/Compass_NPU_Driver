# Samples for UMD

The samples can quickly verify the functionality of the whole UMD and KMD logic. They can be split into two parts, one is for simulation environmetn, another is for HW environment.

## 1. For simulator verification
- simulation_test: this case is for aipu v1/v2.

```bash
# ./aipu_simulation_test -[x|z|q|k] aipu_simulator_[x1|z1|z2|z3] -b aipu.bin -i input0.bin -c output.bin -d ./

eg:
-x aipu_simulator_x1
-z aipu_simulator_z1
-q aipu_simulator_z2
-k aipu_simulator_z3

```

- v3_simulation_test: this case is only for aipu v3.

```bash
# ./aipu_v3_simulation_test -b aipu.bin -i input0.bin -c output.bin -d ./
```

note:
- aipu.bin,input.bin and output.bin are some necessary files generated by specific buildtool(NN-Compiler).
- These cases only use UMD source code, don't need KMD part.
- Add the library of UMD to LD_LIBRARY_PATH.

## 2. For HW verifcation
- benchmark_test: a general case run on HW board.
```bash
# ./aipu_benchmark_test -b aipu.bin -i input0.bin -c output.bin -d ./
```

- mthread_test: create two thread to run different inference jobs.
```bash
# ./aipu_mthread_test [-p] -b aipu.bin -i input0.bin -c output.bin -d ./
```

- flush_job_test: create multiple inference jobs firstly, then get their result one by one.
```bash
# ./aipu_flush_job_test -b aipu.bin -i input0.bin -c output.bin -d ./
```

- profiler_test: can dump profiling data if enable profile feature, only for aipu v1/v2.
```bash
# ./aipu_profiler_test -b aipu.bin -i input0.bin -c output.bin -d ./
```

- multi_model_test: load multiple models and dispatch them to different core, only for aipu v3.
```bash
# ./aipu_multi_model_test -b aipu.bin -i input0.bin -c output.bin -d ./
```

- batch_test: load multiple input frames for one model, try to parallel frames on cores. only for aipu v3.
```bash
# ./aipu_batch_test -b aipu.bin -i input0.bin -c output.bin -d ./
```


note:
- These cases will cover both UMD and KMD part.
- Add the path of UMD library to LD_LIBRARY_PATH.